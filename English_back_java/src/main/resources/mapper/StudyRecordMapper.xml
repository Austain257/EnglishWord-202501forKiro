<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.austain.mapper.StudyRecordMapper">

    <insert id="addStudyRecord" keyProperty="id">
        insert learning_checklist (user_id, learning_record, type, due_date) value (#{userId}, #{learningRecord}, #{type}, #{dueDate})
    </insert>

    <update id="updateRecord">
         update learning_checklist
         <set>
              <if test="learningRecord != null">
                 learning_record = #{learningRecord},
             </if>
              <if test="type != null">
                 type = #{type},
             </if>
              <if test="dueDate != null">
                 due_date = #{dueDate},
             </if>
         </set>
         where user_id = #{userId} and id = #{id}
    </update>

    <!-- 批量删除学习记录 -->
    <delete id="deleteRecords">
        DELETE FROM learning_checklist WHERE user_id = #{userId} AND id IN
        <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

</mapper>
