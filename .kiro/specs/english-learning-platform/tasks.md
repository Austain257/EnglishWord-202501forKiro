# 实现计划 - 英语学习平台

## 概述

本文档定义了英语学习平台的实现任务列表。任务按照功能模块组织，采用增量开发方式，确保每个步骤都能产生可验证的功能。所有任务都基于已批准的需求文档和设计文档。

**重要说明**: 后端API已完全实现并可用，前端将直接调用这些API。所有API接口使用 `/api/` 前缀，baseURL为 `http://192.168.43.106:8080`。

## 任务列表

### 1. 项目初始化与核心架构

- [x] 1.1 配置 Vue 3 项目基础设施
  - 安装 Vue 3、Vite、Pinia、Vue Router、Axios
  - 配置 Tailwind CSS 4
  - 设置 ESLint 和 Prettier
  - 配置环境变量（API_BASE_URL）
  - _需求: 技术栈配置_

- [x] 1.2 创建项目目录结构
  - 创建 components/、views/、stores/、services/、router/、utils/、composables/ 目录
  - 设置别名配置（@指向src）
  - _需求: 架构设计_

- [x] 1.3 配置 HTTP 客户端（Axios）
  - 创建 Axios 实例配置（services/api.js）
  - 设置 baseURL 为 http://192.168.43.106:8080
  - 实现请求拦截器（添加认证令牌）
  - 实现响应拦截器（错误处理、令牌刷新）
  - _需求: 13.1, 13.2, 13.3_

- [ ] 1.4 编写 HTTP 客户端属性测试
  - **属性 17: API错误处理** - 对于任何API请求失败，系统应该显示用户友好的错误消息
  - **验证需求: 13.1, 13.2, 13.3**

- [x] 1.5 创建通用组合式函数
  - 实现 useToast（消息提示）
  - 实现 useLoading（加载状态）
  - 实现 useAuth（认证状态）
  - _需求: 13.4, 13.5_

### 2. 路由系统与导航

- [x] 2.1 配置 Vue Router
  - 创建路由配置文件（router/index.js）
  - 定义所有路由（登录、首页、课本、单词学习等）
  - 实现路由懒加载
  - _需求: 1.1, 核心架构_

- [x] 2.2 实现全局导航守卫
  - 实现认证检查守卫
  - 实现课本上下文检查守卫
  - 处理未授权访问重定向
  - _需求: 1.1, 1.6_

- [ ] 2.3 编写路由守卫属性测试
  - **属性 1: 未认证用户路由保护** - 对于任何未认证用户和需要认证的路由，应该重定向到登录页面
  - **验证需求: 1.1**



### 3. 认证系统

- [x] 3.1 创建认证状态管理（stores/auth.js）
  - 定义用户状态（user, token, isAuthenticated）
  - 实现登录 action
  - 实现登出 action
  - 实现令牌持久化（localStorage）
  - _需求: 1.2, 1.4, 1.5_

- [x] 3.2 创建登录页面（views/Login.vue）
  - 实现登录表单UI
  - 实现表单验证
  - 集成认证 store
  - 处理登录成功/失败
  - _需求: 1.2, 1.3_

- [x] 3.3 创建注册页面（views/Register.vue）
  - 实现注册表单UI
  - 实现表单验证（用户名、密码、邮箱）
  - 集成认证 API
  - _需求: 1.3_

- [ ] 3.4 编写认证系统属性测试
  - **属性 2: 认证令牌生成** - 对于任何有效凭证，应该返回有效JWT令牌
  - **属性 3: 登出状态清除** - 登出时应该清除所有认证状态
  - **验证需求: 1.2, 1.5**

- [x] 3.5 创建认证服务层（services/auth.service.js）
  - 实现登录 API 调用（POST /api/auth/login）
  - 实现注册 API 调用（POST /api/auth/register）
  - 实现登出 API 调用（POST /api/auth/logout）
  - 实现令牌刷新 API 调用（POST /api/auth/refresh）
  - 实现令牌验证 API 调用（GET /api/auth/validate）
  - _需求: 1.2, 1.3, 1.5_

### 4. 通用UI组件

- [x] 4.1 创建基础组件
  - Button.vue（按钮组件）
  - Card.vue（卡片组件）
  - Loading.vue（加载指示器）
  - Toast.vue（消息提示）
  - _需求: 核心架构_

- [ ] 4.2 创建布局组件
  - Header.vue（顶部导航栏）
  - Sidebar.vue（侧边栏）
  - Footer.vue（页脚）
  - _需求: 2.2, 响应式设计_

- [ ] 4.3 实现响应式布局
  - 配置 Tailwind 断点
  - 实现移动端布局（<768px）
  - 实现平板布局（768-1199px）
  - 实现桌面布局（≥1200px）
  - _需求: 12.1, 12.2, 12.3_

- [ ] 4.4 编写响应式布局属性测试
  - **属性 19: 响应式断点适配** - 对于任何屏幕宽度，应该使用对应断点的样式
  - **验证需求: 12.1, 12.2, 12.3**

### 5. 课本管理系统

- [x] 5.1 创建课本状态管理（stores/book.js）
  - 定义课本状态（books, currentBook, loading）
  - 实现获取课本列表 action
  - 实现选择课本 action
  - 实现课本持久化（localStorage）
  - _需求: 2.1, 2.3_

- [x] 5.2 创建课本服务层（services/book.service.js）
  - 实现获取课本列表 API（GET /api/english/books/{userId}）
  - 实现检查课本存在 API（GET /api/english/books/{bookId}/check）
  - _需求: 2.1, 2.5_

- [x] 5.3 创建课本列表页面（views/BookList.vue）
  - 实现课本卡片列表UI
  - 显示课本信息（名称、描述、封面、词汇量）
  - 实现课本选择功能
  - 处理加载和错误状态
  - _需求: 2.1, 2.2, 2.3_

- [ ] 5.4 创建课本卡片组件（components/BookCard.vue）
  - 显示课本封面
  - 显示课本详细信息
  - 实现点击选择交互
  - _需求: 2.2_

- [ ] 5.5 编写课本管理属性测试
  - **属性 4: 课本列表过滤** - 返回的课本应该只包含用户拥有的或公开的启用课本
  - **属性 5: 课本上下文隔离** - 在特定课本上下文中，所有单词操作应该包含正确的bookId
  - **验证需求: 2.1, 2.4, 2.6**

### 6. 首页与激励系统

- [x] 6.1 创建首页（views/Home.vue）
  - 实现欢迎信息展示
  - 集成激励文案轮播
  - 显示学习统计概览
  - 提供快速导航入口
  - _需求: 2.2, 11.1_

- [x] 6.2 创建激励文案组件（components/MotivationQuote.vue）
  - 实现轮播UI
  - 从后端获取随机文案
  - 显示文案内容、作者、标签
  - _需求: 11.1, 11.2, 11.3_

- [x] 6.3 创建激励文案服务（services/motivation.service.js）
  - 实现获取随机文案 API（GET /api/global/motivation/random）
  - 实现获取文案列表 API（GET /api/global/motivation/list）
  - _需求: 11.2_

### 7. 单词学习系统 - 初学模式

- [x] 7.1 创建单词状态管理（stores/word.js）
  - 定义单词状态（words, currentIndex, currentWord, showChinese, learningRange, progress）
  - 实现获取单词列表 action
  - 实现导航 actions（nextWord, prevWord）
  - 实现标记掌握状态 actions
  - _需求: 3.1, 3.2, 3.3, 4.1_

- [x] 7.2 创建单词服务层（services/word.service.js）
  - 实现获取单词列表 API（POST /api/english/wordList）
  - 实现标记为错词 API（POST /api/english/notGrasp/{id}）
  - 实现标记为已掌握 API（POST /api/english/isGrasp/{id}）
  - _需求: 3.1, 4.3, 4.4_

- [x] 7.3 创建单词卡片组件（components/learning/WordCard.vue）
  - 显示单词、音标、中文释义
  - 显示错词统计（根据isGrasp状态调整样式）
  - 支持显示/隐藏中文
  - _需求: 3.1, 3.5, 3.6, 3.7_

- [x] 7.4 创建进度条组件（components/learning/ProgressBar.vue）
  - 显示学习进度（已学/总词数）
  - 显示进度条
  - _需求: 3.4_

- [x] 7.5 创建单词初学页面（views/WordLearning.vue）
  - 集成单词卡片组件
  - 集成进度条组件
  - 实现[上一个][下一个]导航按钮
  - 实现学习范围选择
  - _需求: 3.1, 3.2, 3.3, 3.8_

- [ ] 7.6 编写单词导航属性测试
  - **属性 6: 列表导航一致性** - 点击下一个应该增加索引，点击上一个应该减少索引
  - **属性 7: 学习范围过滤** - 加载的单词应该只包含指定范围内的单词
  - **验证需求: 3.2, 3.3, 3.8**



### 8. 单词学习系统 - 复习模式

- [x] 8.1 创建单词复习页面（views/WordReview.vue）
  - 默认隐藏中文释义
  - 实现[显示中文]按钮
  - 实现[已掌握][加入错词本][下一个][上一个]按钮
  - 集成单词卡片和进度条
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 8.2 编写单词复习属性测试
  - **属性 8: 掌握状态更新** - 标记已掌握时isGrasp应该为1，标记错词时isGrasp应该为2且errorTimes增加
  - **验证需求: 4.3, 4.4**

### 9. 单词学习系统 - 听写模式

- [x] 9.1 创建单词听写页面（views/WordDictation.vue）
  - 实现英译汉/汉译英模式切换
  - 实现答案输入框
  - 实现答案提交和校对
  - 实现错误高亮显示
  - 实现彩带动画效果（答对时）
  - 实现[跳过][查看答案]按钮
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 9.2 实现答案校对逻辑（内置在听写页面）
  - 实现字符串比对算法
  - 标识错误字符位置
  - 处理大小写和空格
  - _需求: 5.3_

- [ ] 9.3 编写听写模式属性测试
  - **属性 9: 听写答案校对** - 校对结果应该准确标识所有不匹配的字符位置
  - **属性 10: 听写正确答案处理** - 答对时应该自动标记已掌握并导航到下一个
  - **属性 11: 听写错误答案处理** - 答错时应该标记为错词并增加错误次数
  - **验证需求: 5.3, 5.4, 5.5**

### 10. 错词本系统

- [x] 10.1 创建错词本页面（views/ErrorWordBook.vue）
  - 加载所有isGrasp=2的单词
  - 提供复习模式和听写模式切换
  - 实现[已掌握][未掌握]按钮
  - 显示累计错误次数
  - 自动导航到下一词
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.8_

- [ ] 10.2 编写错词本属性测试
  - **属性 14: 错词本过滤** - 显示的所有单词isGrasp应该等于2
  - **验证需求: 8.1**

### 11. 句子学习系统

- [ ] 11.1 创建句子状态管理（stores/sentence.js）
  - 定义句子状态（sentences, currentIndex, currentSentence, showChinese）
  - 实现获取句子列表 action
  - 实现导航 actions
  - 实现标记掌握状态 actions
  - _需求: 6.1, 6.2, 6.3_

- [ ] 11.2 创建句子服务层（services/sentence.service.js）
  - 实现获取句子列表 API（POST /api/english/sentence）
  - 实现标记为错句 API（POST /api/english/notGrasp/{id}）
  - 实现标记为已掌握 API（POST /api/english/isGrasp/{id}）
  - _需求: 6.1, 6.6_

- [ ] 11.3 创建句子卡片组件（components/learning/SentenceCard.vue）
  - 显示英文原句和中文翻译
  - 提供音频播放按钮
  - 支持显示/隐藏中文
  - _需求: 6.1, 6.4_

- [ ] 11.4 创建句子学习页面（views/SentenceLearning.vue）
  - 集成句子卡片组件
  - 实现[上一句][下一句]导航
  - 同时显示英文和中文
  - _需求: 6.1, 6.2, 6.3_

- [ ] 11.5 创建句子听写页面（views/SentenceDictation.vue）
  - 隐藏中文翻译
  - 实现答案输入和校对
  - 实现渐进提示功能
  - 处理错误句子标记
  - _需求: 6.5, 6.6, 6.7_

- [ ] 11.6 编写句子学习属性测试
  - **属性 6: 列表导航一致性** - 句子导航应该与单词导航逻辑一致
  - **验证需求: 6.2, 6.3**

### 12. 错句本系统

- [ ] 12.1 创建错句本页面（views/ErrorSentenceBook.vue）
  - 加载所有isGrasp=2的句子
  - 提供复习模式和听写模式
  - 实现状态标记和导航
  - 显示累计错误次数
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.8_

- [ ] 12.2 编写错句本属性测试
  - **属性 14: 错词本过滤** - 显示的所有句子isGrasp应该等于2
  - **验证需求: 9.1**

### 13. 学习清单系统

- [x] 13.1 创建学习清单状态管理（stores/checklist.js）
  - 定义清单状态（checklists, activeTab, selectedItems）
  - 实现获取清单 action
  - 实现添加/更新/删除 actions
  - 实现批量操作 actions
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7_

- [x] 13.2 创建学习清单服务层（services/checklist.service.js）
  - 实现获取清单列表 API（GET /api/studyRecord/list/{userId}）
  - 实现添加清单 API（POST /api/studyRecord/addRecord）
  - 实现更新清单 API（POST /api/studyRecord/update）
  - 实现删除清单 API（POST /api/studyRecord/delete）
  - _需求: 7.3, 7.5, 7.7_

- [x] 13.3 创建学习清单页面（views/LearningChecklist.vue）
  - 实现三标签页（单词、句子、听力）
  - 实现清单列表展示
  - 实现复选框选择
  - 实现批量标记完成
  - 实现新增清单表单
  - 显示激励文案
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8_

- [ ] 13.4 编写学习清单属性测试
  - **属性 12: 类型过滤一致性** - 选择特定类型时，显示的所有项目type应该匹配
  - **属性 13: 批量操作原子性** - 批量操作要么全部成功要么全部失败
  - **验证需求: 7.2, 7.6**

### 14. 知识积累系统（随身记）

- [x] 14.1 创建积累状态管理（stores/jotting.js）
  - 定义积累状态（jottings, activeTab, pagination）
  - 实现获取积累列表 action
  - 实现添加/更新/删除 actions
  - 实现分页 actions
  - _需求: 10.3, 10.4, 10.5, 10.6, 10.7, 10.8_

- [x] 14.2 创建积累服务层（services/jotting.service.js）
  - 实现获取积累列表 API（GET /api/jotting/list）
  - 实现添加积累 API（POST /api/jotting/add）
  - 实现更新积累 API（PUT /api/jotting/update）
  - 实现删除积累 API（DELETE /api/jotting/delete）
  - 实现批量删除 API（POST /api/jotting/batchDelete）
  - 实现标记已复习 API（POST /api/jotting/setReview/{userId}）
  - _需求: 10.3, 10.6, 10.7_

- [x] 14.3 创建悬浮按钮组件（components/JottingButton.vue）
  - 固定在右下角
  - 点击展开输入面板
  - 支持类型选择（单词/句子）
  - 实现提交功能
  - _需求: 10.1, 10.2, 10.3_

- [x] 14.4 创建积累本页面（views/Jottings.vue）
  - 实现双标签页（单词、句子）
  - 实现分页列表展示
  - 实现编辑功能
  - 实现单条/批量删除
  - 实现已掌握标记
  - _需求: 10.4, 10.5, 10.6, 10.7, 10.8_

- [ ] 14.5 编写积累系统属性测试
  - **属性 15: 分页数据一致性** - 返回的数据数量不应超过pageSize
  - **属性 16: 全局组件可见性** - 悬浮按钮应该在所有需要认证的路由中可见
  - **验证需求: 10.1, 10.4**

### 15. 工具函数与辅助功能

- [ ] 15.1 实现本地存储工具（utils/storage.js）
  - 封装localStorage操作
  - 实现数据序列化/反序列化
  - 处理存储异常
  - _需求: 14.1_

- [ ] 15.2 实现表单验证工具（utils/validator.js）
  - 实现邮箱验证
  - 实现密码强度验证
  - 实现用户名验证
  - _需求: 1.3, 13.3_

- [ ] 15.3 编写工具函数单元测试
  - 测试本地存储操作
  - 测试表单验证规则
  - 测试边界情况

### 16. 集成与优化

- [ ] 16.1 实现全局错误处理
  - 配置Vue错误处理器
  - 实现错误边界组件
  - 集成错误上报
  - _需求: 13.1_

- [ ] 16.2 实现性能优化
  - 配置路由懒加载
  - 实现组件懒加载
  - 配置Tailwind PurgeCSS
  - 实现图片懒加载
  - _需求: 15.1, 15.2_

- [ ] 16.3 实现可访问性支持
  - 添加ARIA标签
  - 实现键盘导航
  - 确保颜色对比度
  - 添加替代文本
  - _需求: 17.1, 17.2, 17.3, 17.4_

- [ ] 16.4 编写可访问性属性测试
  - **属性 20: 可访问性ARIA标签** - 所有交互式元素应该包含适当的ARIA标签
  - **验证需求: 17.1**

### 17. 测试与文档

- [ ] 17.1 编写端到端测试
  - 测试完整的用户登录流程
  - 测试单词学习流程
  - 测试句子学习流程
  - 测试学习清单流程

- [ ] 17.2 编写集成测试
  - 测试路由导航流程
  - 测试Store与Service交互
  - 测试多组件协作

- [ ] 17.3 编写API文档
  - 文档化所有未实现的API接口
  - 包含请求/响应示例
  - 包含错误代码说明
  - _需求: 开发交付物_

- [ ] 17.4 编写技术文档
  - 前端架构设计说明
  - 组件层次结构图
  - 状态管理设计
  - 部署指南
  - _需求: 开发交付物_

### 18. 最终检查点

- [ ] 18.1 确保所有测试通过
  - 运行所有单元测试
  - 运行所有属性测试
  - 运行所有集成测试
  - 运行所有E2E测试
  - 确保测试覆盖率达标

- [ ] 18.2 验收测试
  - 在桌面设备测试（≥1200px）
  - 在平板设备测试（768-1199px）
  - 在移动设备测试（<768px）
  - 验证所有功能完整性
  - 验证性能指标
  - _需求: 验收标准_

- [ ] 18.3 生产构建
  - 配置生产环境变量
  - 执行生产构建
  - 验证构建产物
  - 准备部署

## 注意事项

- 所有任务都是必需的，包括测试任务，以确保全面的质量保证
- 每个任务都引用了具体的需求编号，确保可追溯性
- 属性测试任务明确标注了属性编号和验证的需求
- 建议按顺序执行任务，确保依赖关系正确
- 在关键检查点暂停，确保所有测试通过后再继续

